function [genotypesNew ages base_fitnesses fitnesses] = birthDeath( adjmx, ...
    genotypesOld, w, fitnesses, pmod, reproduce)
%BIRTHDEATH Summary of this function goes here
%   reproduce is a function

n_births = floor(length(genotypesOld)*pmod);
parents = zeros(n_births,1);
placements = zeros(n_birth,1);
num_list = 1:length(genotypesOld);

agents_cdf = cumsum(fun2pdf(fitness));

genotypesNew = genotypesOld;

for i=1:n_births,
    %select the first agent that passes the cdf threshold
    choices = neighbours_indices(agents_cdf > rand);
    parent = choices(1);
    
    %get the list of parent's neighbours
    neighbours_indices = num_list(adjmx(parent,:)==1);
    
    %pick a neighbour uniformly at random.
    target = neighbours_indices(ceil(rand*length(neighbours_indices)));
    
    genotypesNew(target) = reproduce(
end

